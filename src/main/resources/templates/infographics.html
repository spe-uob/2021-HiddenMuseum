<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Infographics</title>
    <script src="https://use.fontawesome.com/639e5b5645.js"></script>

    <link rel="stylesheet" href="/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <div>
        <canvas id="myChart"></canvas>
    </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:inline="javascript">
    const datesToInclude = /*[[${datesToInclude}]]*/ [];
    const numOfDates = /*[[${numOfDates}]]*/ [];
    var hashmap = new Map();
    hashmap = /*${AllTitlesWhenAtDate}*/ {};
    
    const data = {
        labels: datesToInclude,
        datasets: [{
            label: 'Artworks by time',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: numOfDates,
        }]
    };

    const config = {
        type: 'bar',
        data: data,
        options: {
            onClick: (event, activeElements) => {
                console.log("getElementsAtEventForMode: %o",myChart.getElementsAtEventForMode(event, "point", {intersect: false}));
                var whereAt = myChart.getElementsAtEventForMode(event, "point", {intersect: false});
                console.log(whereAt[0].index);
                console.log("===== </CLICK EVENT> =====");
                console.log(hashmap[whereAt[0].index+datesToInclude[0]])
            }
        }
    };
</script>


<script>
    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );
</script>