<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Infographics</title>
    <script src="https://use.fontawesome.com/639e5b5645.js"></script>

    <link rel="stylesheet" href="/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <div>
        <canvas id="myChart"></canvas>
    </div>
    <p id="Title"> hello</p>
</body>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:inline="javascript">
    const datesToInclude = /*[[${datesToInclude}]]*/ [];
    const numOfDates = /*[[${numOfDates}]]*/ [];
    const datesOfItems = /*[[${datesOfItems}]]*/ [];
    const ListOfTitles = /*[[${ListOfTitles}]]*/ [];
    
    const data = {
        labels: datesToInclude,
        datasets: [{
            label: 'Artworks by time',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: numOfDates,
            barThickness: 2,
        }]
    };

    const config = {
        type: 'bar',
        data: data,
        options: {
            onClick: (event, activeElements) => {
                console.log("getElementsAtEventForMode: %o",myChart.getElementsAtEventForMode(event, "nearest", {intersect: false}));
                var whereAt = myChart.getElementsAtEventForMode(event, "point", {intersect: false});
                try {
                    console.log(whereAt[0].index);
                console.log("===== </CLICK EVENT> =====");
                document.getElementById("Title").innerHTML = ListOfTitles[datesOfItems.indexOf(whereAt[0].index+datesToInclude[0])]
                } catch (error) {
                    
                }
            }
        }
    };
</script>


<script>
    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );
</script>