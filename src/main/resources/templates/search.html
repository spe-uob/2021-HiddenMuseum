<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <title>Search results</title>
        <script src="https://use.fontawesome.com/639e5b5645.js"></script>

        <link rel="stylesheet" href="../static/styles.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>

    <body>
    <main class="content">
        <p th:text="${response.nhits} + ' hits'"></p>
        <div id="search-box" action="search">
        <form class="form" action="/search">
            <div class="input-group mb-3">
                <input id="q" name="q" class="form-control" type="text" placeholder="Search">
                <input id="nhits" name="nhits" class="form-control" type="text" placeholder="num of records to display (max 100)" >
                <button id="search-button" class="btn btn-primary" type="submit">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </form>
        </div>
        <ul>
            <li th:each="record : ${response.records}">
                <a th:href="'/item/' + ${record.datasetid} + '/' + ${record.recordid}">
                    <span th:text="${record.fields.get('title_of_object')}"></span>
                    <span th:if="${record.fields.get('artist')}" th:text="'by ' + ${record.fields.get('artist')}"></span>
                </a>
            </li>
        </ul>
    </main>

        <script type="text/javascript">
            function onLoad() {
                const query = window.location.search;
                const params = new URLSearchParams(query);
                const search_box = document.getElementById("q");
                search_box.value = params.get("q");
                const nhits = document.getElementById("nhits");
                nhits.value = params.get("nhits");
            }

            window.onload = onLoad();
        </script>
    </body>

</html>